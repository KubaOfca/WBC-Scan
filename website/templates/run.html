<form id="run-form" action="{{ url_for('project_views.run')}}" method="post"
      enctype="multipart/form-data">
    <button type="submit" class="btn btn-primary">Run</button>
    <div class="progress">
        <div class="progress-bar" id="run-bar" role="progressbar" style="width: 0%;" aria-valuenow="0"
             aria-valuemin="0"
             aria-valuemax="100">0%
        </div>
    </div>
</form>

<script type="text/javascript">
    window.onload = function () {
        if (document.getElementById("batch-select").value === "default") {
            document.getElementById("image-page-content").style.display = "none";
        } else {
            document.getElementById("image-page-content").style.display = "block";
        }
        const socket = io();
        const loading = document.getElementById("spinner");
        socket.connect("http://127.0.0.1:5000");
        socket.on("connect", function () {
            console.log("Connect!");
            loading.style.opacity = "0";
            setTimeout(() => {
                loading.style.display = "none";
            }, 500)
        })
        let run_bar = document.getElementById("run-bar")
        socket.on("update progress", function (percent) {
            console.log("get percent" + percent);
            run_bar.style.width = percent + "%";
            run_bar.innerHTML = run_bar.style.width;
        })
    }
</script>

